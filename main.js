/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TodoistIndicatorPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  todoistProperty: "todoist",
  projectsFolderPrefix: "1.Projects/",
  projectTag: "#project",
  RequireProjectTag: true,
  tdiSetting: "default",
  projectFileCache: {}
};
function getFrontMatter(markdownString) {
  const frontMatterMatch = markdownString.match(/^---\n([\s\S]*?)\n---/);
  if (frontMatterMatch) {
    const yamlContent = frontMatterMatch[1];
    return (0, import_obsidian.parseYaml)(yamlContent);
  }
  return null;
}
var findTodoistProperty = (string, todoistProperty) => {
  const frontMatter = getFrontMatter(string);
  return checkTodoistPropertyHasValue(frontMatter, todoistProperty);
};
function checkTodoistPropertyHasValue(frontMatter, todoistPropertyName) {
  if (frontMatter && frontMatter.hasOwnProperty(todoistPropertyName)) {
    const value = frontMatter[todoistPropertyName];
    if (typeof value === "string" && value.trim() !== "") {
      return true;
    }
  }
  return false;
}
var clearAllBadges = (fileItem) => {
  fileItem.coverEl.removeClass("todoist-indicator");
};
var paintFileBadge = function(opts, fileItem) {
  const slashes = fileItem.file.path.match(/\//g);
  const fileInFolder = slashes ? slashes.length >= 1 : 0;
  const folderItem = this.app.workspace.getLeavesOfType("file-explorer")[0].view.fileItems[fileItem.file.parent.path];
  const { TodoistLink } = opts || {};
  if (!TodoistLink) {
    fileItem.coverEl.addClass("todoist-indicator");
    if (fileInFolder) {
      folderItem.coverEl.addClass("todoist-indicator");
    }
  } else {
    clearAllBadges(fileItem);
    if (fileInFolder) {
      clearAllBadges(folderItem);
    }
  }
};
function containsTag(file, tag) {
  if (file) {
    const tags = (0, import_obsidian.getAllTags)(app.metadataCache.getFileCache(file));
    return tags.includes(tag);
  } else {
    return false;
  }
}
var TodoistIndicatorPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.isProjectFile = (filename) => {
      let hasProjectTag = false;
      const file = this.app.vault.getFileByPath(filename);
      if (file != "Not a file") {
        hasProjectTag = containsTag.call(this, file, this.settings.projectTag);
      }
      if (Boolean(this.settings.RequireProjectTag)) {
        return filename.startsWith(this.settings.projectsFolderPrefix) && filename.endsWith(".md") && !filename.includes("/_") && hasProjectTag;
      } else {
        return filename.startsWith(this.settings.projectsFolderPrefix) && filename.endsWith(".md") && !filename.includes("/_");
      }
    };
    this.scheduleRepaintBadge = (path, clearAll) => {
      window.setTimeout(() => {
        var _a, _b, _c;
        const leaves = this.app.workspace.getLeavesOfType("file-explorer");
        if ((_c = (_b = (_a = leaves == null ? void 0 : leaves[0]) == null ? void 0 : _a.view) == null ? void 0 : _b.fileItems) == null ? void 0 : _c[path]) {
          if (clearAll)
            clearAllBadges(leaves[0].view.fileItems[path]);
          else
            paintFileBadge.call(this, this.settings.projectFileCache[path], leaves[0].view.fileItems[path]);
        }
      });
    };
    this.updateFileCacheAndMaybeRepaintBadge = async ({ path, stat, deleted }, originalFilename) => {
      if (deleted || !this.isProjectFile(path)) {
        delete this.settings.projectFileCache[path];
        delete this.settings.projectFileCache[originalFilename];
        await this.saveSettings();
        return this.scheduleRepaintBadge(path, true);
      }
      if (!deleted) {
        const string = await this.app.vault.cachedRead(this.app.vault.getAbstractFileByPath(path));
        const { TodoistLink } = this.settings.projectFileCache[path] || {};
        this.settings.projectFileCache[path] = this.settings.projectFileCache[path] || {};
        this.settings.projectFileCache[path].mtime = stat.mtime;
        this.settings.projectFileCache[path].TodoistLink = findTodoistProperty(string, this.todoistProperty);
        await this.saveSettings();
        if (this.settings.projectFileCache[path].TodoistLink !== TodoistLink) {
          this.scheduleRepaintBadge(path);
        }
      }
    };
    this.refreshAllFileBadges = async () => {
      var _a;
      const projectFilesList = this.app.vault.getMarkdownFiles().filter((f) => this.isProjectFile(f.path));
      const filesMap = {};
      let needToSave = false;
      for (const tFile of projectFilesList) {
        filesMap[tFile.path] = this.settings.projectFileCache[tFile.path] || {
          mtime: tFile.stat.mtime
        };
        const lastCache = this.settings.projectFileCache[tFile.path];
        if (tFile.stat.mtime > (lastCache ? lastCache.mtime : 0)) {
          needToSave = true;
          const string = await this.app.vault.cachedRead(tFile);
          filesMap[tFile.path].TodoistLink = findTodoistProperty(string, this.todoistProperty);
        }
      }
      for (const path in this.settings.projectFileCache)
        if (!filesMap[path])
          needToSave = true;
      if (needToSave) {
        this.settings.projectFileCache = filesMap;
        await this.saveSettings();
      }
      const leaves = this.app.workspace.getLeavesOfType("file-explorer");
      if (leaves == null ? void 0 : leaves.length) {
        const fileItems = ((_a = leaves[0].view) == null ? void 0 : _a.fileItems) || {};
        for (const f in fileItems)
          if (this.isProjectFile(f)) {
            try {
              paintFileBadge.call(this, filesMap[f], fileItems[f]);
            } catch (error) {
              console.error(`Error painting badge for file: ${f}`, error);
            }
          }
      }
    };
    this.initialize = () => {
      this.refreshAllFileBadges().catch((error) => {
        console.error('Unexpected error in "todoist-indicator" plugin initialization.', error);
      });
    };
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new SettingTab(this.app, this));
    this.todoistProperty = this.settings.todoistProperty;
    const handleEvent = (event, originalFilename) => {
      if (!this.isProjectFile(event.path) && (!originalFilename || !this.isProjectFile(originalFilename)))
        return;
      this.updateFileCacheAndMaybeRepaintBadge(event, originalFilename).catch((error) => {
        console.error("Error while handling event!", error);
      });
    };
    this.registerEvent(this.app.vault.on("delete", handleEvent));
    this.registerEvent(this.app.vault.on("rename", handleEvent));
    this.registerEvent(this.app.vault.on("modify", handleEvent));
    this.app.workspace.onLayoutReady(this.initialize.bind(this));
    this.addSettingTab(new SettingTab(this.app, this));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var SettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("p", { text: "Please reload Obsidian after changing these settings for them to take effect." });
    new import_obsidian.Setting(containerEl).setName("Projects folder").setDesc('The folder where project files live, e.g. "Projects/".').addText(
      (text) => text.setPlaceholder(DEFAULT_SETTINGS.projectsFolderPrefix).setValue(this.plugin.settings.projectsFolderPrefix).onChange(async (value) => {
        this.plugin.settings.projectsFolderPrefix = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Todoist tag").setDesc("The tag that indicates Todoist link.").addText(
      (text) => text.setPlaceholder(DEFAULT_SETTINGS.todoistProperty).setValue(this.plugin.settings.todoistProperty).onChange(async (value) => {
        this.plugin.settings.todoistProperty = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Require project tag?").setDesc("With this setting enabled, badges will only appear on files (and their containing folder) with the project tag.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.RequireProjectTag).onChange(async (value) => {
        this.plugin.settings.RequireProjectTag = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Project tag").setDesc("The tag that indicates a file is a project file (handy in case you store project related files in a project folder).").addText(
      (text) => text.setPlaceholder(DEFAULT_SETTINGS.projectTag).setValue(this.plugin.settings.projectTag).onChange(async (value) => {
        this.plugin.settings.projectTag = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBwYXJzZVlhbWwsIGdldEFsbFRhZ3MgfSBmcm9tICdvYnNpZGlhbic7XG5cbmludGVyZmFjZSBUb2RvaXN0SW5kaWNhdG9yU2V0dGluZ3Mge1xuXHR0ZGlTZXR0aW5nOiBzdHJpbmc7XG5cdHRvZG9pc3RQcm9wZXJ0eTogc3RyaW5nO1xuXHRwcm9qZWN0c0ZvbGRlclByZWZpeDogc3RyaW5nO1xuXHRwcm9qZWN0VGFnOiBzdHJpbmc7XG5cdFJlcXVpcmVQcm9qZWN0VGFnOiBib29sZWFuO1xuXHRwcm9qZWN0RmlsZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQYXJ0aWFsPFRvZG9pc3RJbmRpY2F0b3JTZXR0aW5ncz4gPSB7XG5cdHRvZG9pc3RQcm9wZXJ0eTogJ3RvZG9pc3QnLFxuXHRwcm9qZWN0c0ZvbGRlclByZWZpeDogJzEuUHJvamVjdHMvJyxcblx0cHJvamVjdFRhZzogJyNwcm9qZWN0Jyxcblx0UmVxdWlyZVByb2plY3RUYWc6IHRydWUsXG5cdHRkaVNldHRpbmc6ICdkZWZhdWx0Jyxcblx0cHJvamVjdEZpbGVDYWNoZToge31cbn07XG5cbmZ1bmN0aW9uIGdldEZyb250TWF0dGVyKG1hcmtkb3duU3RyaW5nOiBzdHJpbmcpIHtcblx0Y29uc3QgZnJvbnRNYXR0ZXJNYXRjaCA9IG1hcmtkb3duU3RyaW5nLm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdGlmIChmcm9udE1hdHRlck1hdGNoKSB7XG5cdFx0Y29uc3QgeWFtbENvbnRlbnQgPSBmcm9udE1hdHRlck1hdGNoWzFdO1xuXHRcdHJldHVybiBwYXJzZVlhbWwoeWFtbENvbnRlbnQpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufVxuXG5jb25zdCBmaW5kVG9kb2lzdFByb3BlcnR5ID0gKHN0cmluZzogc3RyaW5nLCB0b2RvaXN0UHJvcGVydHk6IHN0cmluZykgPT4ge1xuXHRjb25zdCBmcm9udE1hdHRlciA9IGdldEZyb250TWF0dGVyKHN0cmluZyk7XG5cdHJldHVybiBjaGVja1RvZG9pc3RQcm9wZXJ0eUhhc1ZhbHVlKGZyb250TWF0dGVyLCB0b2RvaXN0UHJvcGVydHkpO1xufTtcblxuZnVuY3Rpb24gY2hlY2tUb2RvaXN0UHJvcGVydHlIYXNWYWx1ZShmcm9udE1hdHRlcjogYW55LCB0b2RvaXN0UHJvcGVydHlOYW1lOiBzdHJpbmcpIHtcblx0aWYgKGZyb250TWF0dGVyICYmIGZyb250TWF0dGVyLmhhc093blByb3BlcnR5KHRvZG9pc3RQcm9wZXJ0eU5hbWUpKSB7XG5cdFx0Y29uc3QgdmFsdWUgPSBmcm9udE1hdHRlclt0b2RvaXN0UHJvcGVydHlOYW1lXTtcblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50cmltKCkgIT09ICcnKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuXG5jb25zdCBjbGVhckFsbEJhZGdlcyA9IChmaWxlSXRlbTogYW55KSA9PiB7XG5cdGZpbGVJdGVtLmNvdmVyRWwucmVtb3ZlQ2xhc3MoJ3RvZG9pc3QtaW5kaWNhdG9yJyk7XG59O1xuXG5jb25zdCBwYWludEZpbGVCYWRnZSA9IGZ1bmN0aW9uICh0aGlzOiBUb2RvaXN0SW5kaWNhdG9yUGx1Z2luLCBvcHRzOiBhbnksIGZpbGVJdGVtOiBhbnkpIHtcblx0Y29uc3Qgc2xhc2hlcyA9IGZpbGVJdGVtLmZpbGUucGF0aC5tYXRjaCgvXFwvL2cpO1xuXHRjb25zdCBmaWxlSW5Gb2xkZXIgPSBzbGFzaGVzID8gc2xhc2hlcy5sZW5ndGggPj0gMSA6IDA7XG5cblx0Y29uc3QgZm9sZGVySXRlbSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKVswXS52aWV3LmZpbGVJdGVtc1tmaWxlSXRlbS5maWxlLnBhcmVudC5wYXRoXTtcblxuXHRjb25zdCB7IFRvZG9pc3RMaW5rIH0gPSBvcHRzIHx8IHt9O1xuXG5cdGlmICghVG9kb2lzdExpbmspIHtcblx0XHRmaWxlSXRlbS5jb3ZlckVsLmFkZENsYXNzKCd0b2RvaXN0LWluZGljYXRvcicpO1xuXHRcdGlmIChmaWxlSW5Gb2xkZXIpIHtcblx0XHRcdGZvbGRlckl0ZW0uY292ZXJFbC5hZGRDbGFzcygndG9kb2lzdC1pbmRpY2F0b3InKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0Y2xlYXJBbGxCYWRnZXMoZmlsZUl0ZW0pO1xuXHRcdGlmIChmaWxlSW5Gb2xkZXIpIHtcblx0XHRcdGNsZWFyQWxsQmFkZ2VzKGZvbGRlckl0ZW0pO1xuXHRcdH1cblx0fVxufTtcblxuZnVuY3Rpb24gY29udGFpbnNUYWcoZmlsZTogYW55LCB0YWc6IHN0cmluZykge1xuXHRpZihmaWxlKXtcblx0XHRjb25zdCB0YWdzID0gZ2V0QWxsVGFncyhhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSkpO1xuXHRcdHJldHVybiB0YWdzLmluY2x1ZGVzKHRhZyk7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9kb2lzdEluZGljYXRvclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBUb2RvaXN0SW5kaWNhdG9yU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHR0aGlzLnRvZG9pc3RQcm9wZXJ0eSA9IHRoaXMuc2V0dGluZ3MudG9kb2lzdFByb3BlcnR5O1xuXG5cdFx0Y29uc3QgaGFuZGxlRXZlbnQgPSAoZXZlbnQ6IGFueSwgb3JpZ2luYWxGaWxlbmFtZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuaXNQcm9qZWN0RmlsZShldmVudC5wYXRoKSAmJiAoIW9yaWdpbmFsRmlsZW5hbWUgfHwgIXRoaXMuaXNQcm9qZWN0RmlsZShvcmlnaW5hbEZpbGVuYW1lKSkpIHJldHVybjtcblx0XHRcdHRoaXMudXBkYXRlRmlsZUNhY2hlQW5kTWF5YmVSZXBhaW50QmFkZ2UoZXZlbnQsIG9yaWdpbmFsRmlsZW5hbWUpLmNhdGNoKGVycm9yID0+IHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgaGFuZGxpbmcgZXZlbnQhJywgZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbignZGVsZXRlJywgaGFuZGxlRXZlbnQpKTtcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oJ3JlbmFtZScsIGhhbmRsZUV2ZW50KSk7XG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdtb2RpZnknLCBoYW5kbGVFdmVudCkpO1xuXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkodGhpcy5pbml0aWFsaXplLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0Ly8gQW55IGNsZWFudXAgY2FuIGdvIGhlcmVcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cblx0aXNQcm9qZWN0RmlsZSA9IChmaWxlbmFtZTogc3RyaW5nKSA9PiB7XG5cblx0XHRsZXQgaGFzUHJvamVjdFRhZyA9IGZhbHNlO1xuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVCeVBhdGgoZmlsZW5hbWUpO1xuXG5cdFx0aWYgKGZpbGUgIT0gXCJOb3QgYSBmaWxlXCIpIHtcblx0XHRcdGhhc1Byb2plY3RUYWcgPSBjb250YWluc1RhZy5jYWxsKHRoaXMsIGZpbGUsIHRoaXMuc2V0dGluZ3MucHJvamVjdFRhZyk7XG5cdFx0fVxuXG5cdFx0aWYgKEJvb2xlYW4odGhpcy5zZXR0aW5ncy5SZXF1aXJlUHJvamVjdFRhZykpIHtcblx0XHRcdHJldHVybiBmaWxlbmFtZS5zdGFydHNXaXRoKHRoaXMuc2V0dGluZ3MucHJvamVjdHNGb2xkZXJQcmVmaXgpXG5cdFx0XHRcdCYmIGZpbGVuYW1lLmVuZHNXaXRoKCcubWQnKVxuXHRcdFx0XHQmJiAhZmlsZW5hbWUuaW5jbHVkZXMoJy9fJylcblx0XHRcdFx0JiYgaGFzUHJvamVjdFRhZztcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGZpbGVuYW1lLnN0YXJ0c1dpdGgodGhpcy5zZXR0aW5ncy5wcm9qZWN0c0ZvbGRlclByZWZpeClcblx0XHRcdFx0JiYgZmlsZW5hbWUuZW5kc1dpdGgoJy5tZCcpXG5cdFx0XHRcdCYmICFmaWxlbmFtZS5pbmNsdWRlcygnL18nKTtcblx0XHR9XG5cdH1cblxuXHRzY2hlZHVsZVJlcGFpbnRCYWRnZSA9IChwYXRoOiBzdHJpbmcsIGNsZWFyQWxsOiBib29sZWFuKSA9PiB7XG5cdFx0d2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xuXHRcdFx0aWYgKGxlYXZlcz8uWzBdPy52aWV3Py5maWxlSXRlbXM/LltwYXRoXSkge1xuXHRcdFx0XHRpZiAoY2xlYXJBbGwpIGNsZWFyQWxsQmFkZ2VzKGxlYXZlc1swXS52aWV3LmZpbGVJdGVtc1twYXRoXSk7XG5cdFx0XHRcdGVsc2UgcGFpbnRGaWxlQmFkZ2UuY2FsbCh0aGlzLCB0aGlzLnNldHRpbmdzLnByb2plY3RGaWxlQ2FjaGVbcGF0aF0sIGxlYXZlc1swXS52aWV3LmZpbGVJdGVtc1twYXRoXSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHR1cGRhdGVGaWxlQ2FjaGVBbmRNYXliZVJlcGFpbnRCYWRnZSA9IGFzeW5jICh7IHBhdGgsIHN0YXQsIGRlbGV0ZWQgfTogYW55LCBvcmlnaW5hbEZpbGVuYW1lOiBzdHJpbmcpID0+IHtcblx0XHRpZiAoZGVsZXRlZCB8fCAhdGhpcy5pc1Byb2plY3RGaWxlKHBhdGgpKSB7XG5cdFx0XHRkZWxldGUgdGhpcy5zZXR0aW5ncy5wcm9qZWN0RmlsZUNhY2hlW3BhdGhdO1xuXHRcdFx0ZGVsZXRlIHRoaXMuc2V0dGluZ3MucHJvamVjdEZpbGVDYWNoZVtvcmlnaW5hbEZpbGVuYW1lXTtcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRyZXR1cm4gdGhpcy5zY2hlZHVsZVJlcGFpbnRCYWRnZShwYXRoLCB0cnVlKTtcblx0XHR9XG5cdFx0aWYgKCFkZWxldGVkKSB7XG5cdFx0XHRjb25zdCBzdHJpbmcgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKSk7XG5cblx0XHRcdGNvbnN0IHsgVG9kb2lzdExpbmsgfSA9IHRoaXMuc2V0dGluZ3MucHJvamVjdEZpbGVDYWNoZVtwYXRoXSB8fCB7fTtcblx0XHRcdHRoaXMuc2V0dGluZ3MucHJvamVjdEZpbGVDYWNoZVtwYXRoXSA9IHRoaXMuc2V0dGluZ3MucHJvamVjdEZpbGVDYWNoZVtwYXRoXSB8fCB7fTtcblx0XHRcdHRoaXMuc2V0dGluZ3MucHJvamVjdEZpbGVDYWNoZVtwYXRoXS5tdGltZSA9IHN0YXQubXRpbWU7XG5cblx0XHRcdHRoaXMuc2V0dGluZ3MucHJvamVjdEZpbGVDYWNoZVtwYXRoXS5Ub2RvaXN0TGluayA9IGZpbmRUb2RvaXN0UHJvcGVydHkoc3RyaW5nLCB0aGlzLnRvZG9pc3RQcm9wZXJ0eSk7XG5cblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5wcm9qZWN0RmlsZUNhY2hlW3BhdGhdLlRvZG9pc3RMaW5rICE9PSBUb2RvaXN0TGluaykge1xuXHRcdFx0XHR0aGlzLnNjaGVkdWxlUmVwYWludEJhZGdlKHBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJlZnJlc2hBbGxGaWxlQmFkZ2VzID0gYXN5bmMgKCkgPT4ge1xuXHRcdFxuXHRcdGNvbnN0IHByb2plY3RGaWxlc0xpc3QgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGYgPT4gdGhpcy5pc1Byb2plY3RGaWxlKGYucGF0aCkpO1xuXHRcdGNvbnN0IGZpbGVzTWFwOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cdFx0bGV0IG5lZWRUb1NhdmUgPSBmYWxzZTtcblxuXHRcdGZvciAoY29uc3QgdEZpbGUgb2YgcHJvamVjdEZpbGVzTGlzdCkge1xuXHRcdFx0ZmlsZXNNYXBbdEZpbGUucGF0aF0gPSB0aGlzLnNldHRpbmdzLnByb2plY3RGaWxlQ2FjaGVbdEZpbGUucGF0aF0gfHwge1xuXHRcdFx0XHRtdGltZTogdEZpbGUuc3RhdC5tdGltZSxcblx0XHRcdH07XG5cdFx0XHRjb25zdCBsYXN0Q2FjaGUgPSB0aGlzLnNldHRpbmdzLnByb2plY3RGaWxlQ2FjaGVbdEZpbGUucGF0aF07XG5cdFx0XHRpZiAodEZpbGUuc3RhdC5tdGltZSA+IChsYXN0Q2FjaGUgPyBsYXN0Q2FjaGUubXRpbWUgOiAwKSkge1xuXHRcdFx0XHRuZWVkVG9TYXZlID0gdHJ1ZTtcblx0XHRcdFx0Y29uc3Qgc3RyaW5nID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZCh0RmlsZSk7XG5cdFx0XHRcdGZpbGVzTWFwW3RGaWxlLnBhdGhdLlRvZG9pc3RMaW5rID0gZmluZFRvZG9pc3RQcm9wZXJ0eShzdHJpbmcsIHRoaXMudG9kb2lzdFByb3BlcnR5KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IHBhdGggaW4gdGhpcy5zZXR0aW5ncy5wcm9qZWN0RmlsZUNhY2hlKSBpZiAoIWZpbGVzTWFwW3BhdGhdKSBuZWVkVG9TYXZlID0gdHJ1ZTtcblx0XHRpZiAobmVlZFRvU2F2ZSkge1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5wcm9qZWN0RmlsZUNhY2hlID0gZmlsZXNNYXA7XG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKTtcblxuXHRcdGlmIChsZWF2ZXM/Lmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgZmlsZUl0ZW1zID0gbGVhdmVzWzBdLnZpZXc/LmZpbGVJdGVtcyB8fCB7fTtcblx0XHRcdGZvciAoY29uc3QgZiBpbiBmaWxlSXRlbXMpIGlmICh0aGlzLmlzUHJvamVjdEZpbGUoZikpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwYWludEZpbGVCYWRnZS5jYWxsKHRoaXMsIGZpbGVzTWFwW2ZdLCBmaWxlSXRlbXNbZl0pO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIHBhaW50aW5nIGJhZGdlIGZvciBmaWxlOiAke2Z9YCwgZXJyb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aW5pdGlhbGl6ZSA9ICgpID0+IHtcblx0XHR0aGlzLnJlZnJlc2hBbGxGaWxlQmFkZ2VzKCkuY2F0Y2goZXJyb3IgPT4ge1xuXHRcdFx0Y29uc29sZS5lcnJvcignVW5leHBlY3RlZCBlcnJvciBpbiBcInRvZG9pc3QtaW5kaWNhdG9yXCIgcGx1Z2luIGluaXRpYWxpemF0aW9uLicsIGVycm9yKTtcblx0XHR9KTtcblx0fVxufVxuXG5jbGFzcyBTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogVG9kb2lzdEluZGljYXRvclBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBUb2RvaXN0SW5kaWNhdG9yUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1BsZWFzZSByZWxvYWQgT2JzaWRpYW4gYWZ0ZXIgY2hhbmdpbmcgdGhlc2Ugc2V0dGluZ3MgZm9yIHRoZW0gdG8gdGFrZSBlZmZlY3QuJyB9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1Byb2plY3RzIGZvbGRlcicpXG5cdFx0XHQuc2V0RGVzYygnVGhlIGZvbGRlciB3aGVyZSBwcm9qZWN0IGZpbGVzIGxpdmUsIGUuZy4gXCJQcm9qZWN0cy9cIi4nKVxuXHRcdFx0LmFkZFRleHQoXG5cdFx0XHRcdHRleHQgPT4gdGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnByb2plY3RzRm9sZGVyUHJlZml4KVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9qZWN0c0ZvbGRlclByZWZpeClcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9qZWN0c0ZvbGRlclByZWZpeCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnVG9kb2lzdCB0YWcnKVxuXHRcdFx0LnNldERlc2MoJ1RoZSB0YWcgdGhhdCBpbmRpY2F0ZXMgVG9kb2lzdCBsaW5rLicpXG5cdFx0XHQuYWRkVGV4dChcblx0XHRcdFx0dGV4dCA9PiB0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MudG9kb2lzdFByb3BlcnR5KVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RvaXN0UHJvcGVydHkpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudG9kb2lzdFByb3BlcnR5ID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdSZXF1aXJlIHByb2plY3QgdGFnPycpXG5cdFx0XHQuc2V0RGVzYygnV2l0aCB0aGlzIHNldHRpbmcgZW5hYmxlZCwgYmFkZ2VzIHdpbGwgb25seSBhcHBlYXIgb24gZmlsZXMgKGFuZCB0aGVpciBjb250YWluaW5nIGZvbGRlcikgd2l0aCB0aGUgcHJvamVjdCB0YWcuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuUmVxdWlyZVByb2plY3RUYWcpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5SZXF1aXJlUHJvamVjdFRhZyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdQcm9qZWN0IHRhZycpXG5cdFx0XHQuc2V0RGVzYygnVGhlIHRhZyB0aGF0IGluZGljYXRlcyBhIGZpbGUgaXMgYSBwcm9qZWN0IGZpbGUgKGhhbmR5IGluIGNhc2UgeW91IHN0b3JlIHByb2plY3QgcmVsYXRlZCBmaWxlcyBpbiBhIHByb2plY3QgZm9sZGVyKS4nKVxuXHRcdFx0LmFkZFRleHQoXG5cdFx0XHRcdHRleHQgPT4gdGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnByb2plY3RUYWcpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb2plY3RUYWcpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvamVjdFRhZyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBbUg7QUFXbkgsSUFBTSxtQkFBc0Q7QUFBQSxFQUMzRCxpQkFBaUI7QUFBQSxFQUNqQixzQkFBc0I7QUFBQSxFQUN0QixZQUFZO0FBQUEsRUFDWixtQkFBbUI7QUFBQSxFQUNuQixZQUFZO0FBQUEsRUFDWixrQkFBa0IsQ0FBQztBQUNwQjtBQUVBLFNBQVMsZUFBZSxnQkFBd0I7QUFDL0MsUUFBTSxtQkFBbUIsZUFBZSxNQUFNLHVCQUF1QjtBQUNyRSxN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
